# 动态表单联动功能说明

本表单实现了真正的字段联动功能，基于 `formData` 的动态显示/隐藏和属性联动。

## 🎯 主要联动功能

### 1. 整体隐藏 (Case1)
- **功能描述**: 通过开关控制其他字段的显示/隐藏
- **触发条件**: 点击"显示更多"开关
- **联动效果**: 
  - 开关关闭时：输入框1 和 输入框2 隐藏
  - 开关开启时：输入框1 和 输入框2 显示
- **技术实现**: `hidden: "!formData.case1.showMore"`

### 2. 选项联动 (Case2)
- **功能描述**: 根据币种选择动态改变输入框的提示和装饰
- **触发条件**: 切换汇款币种（人民币/美元）
- **联动效果**:
  - **人民币**: 
    - 提示: "一次汇款不超过1000元"
    - 前缀: "￥"
    - 后缀: "元"
  - **美元**:
    - 提示: "一次汇款不超过150美元"
    - 前缀: "$"
    - 后缀: "美元"
- **技术实现**: 
  - `tooltip: "formData.case2.bi === 'dollar' ? '一次汇款不超过150美元' : '一次汇款不超过1000元'"`
  - `addonBefore: "formData.case2.bi === 'dollar' ? '$' : '￥'"`
  - `addonAfter: "formData.case2.bi === 'dollar' ? '美元' : '元'"`

### 3. 列表项联动 (Case3)
- **功能描述**: 根据筛选标准动态显示不同的输入组件
- **触发条件**: 选择筛选标准（入球数/所在联盟）
- **联动效果**:
  - **选择"入球数"**:
    - 显示: 关系选择框（>、<、=）
    - 显示: 入球数输入框支持数字校验
    - 隐藏: 联盟名称选择框
  - **选择"所在联盟"**:
    - 隐藏: 关系选择框
    - 隐藏: 入球数输入框
    - 显示: 联盟名称选择框（西甲、英超、中超）
- **技术实现**:
  - `hidden: "rootValue.attr === 'league'"` (对于关系和入球数字段)
  - `hidden: "rootValue.attr !== 'league'"` (对于联盟字段)

## 🎮 测试建议

1. **测试整体隐藏功能**:
   - 点击"显示更多"开关，观察输入框的显示/隐藏
   - 在隐藏状态下填写数据，然后切换开关状态

2. **测试选项联动功能**:
   - 切换币种选择（人民币 ↔ 美元）
   - 观察金额输入框的提示信息、前后缀变化
   - 悬停在金额字段上查看 tooltip 内容

3. **测试列表项联动功能**:
   - 添加多条筛选规则
   - 在每条规则中切换筛选标准（入球数 ↔ 所在联盟）
   - 观察对应字段的显示/隐藏变化
   - 测试数字校验功能（在入球数字段输入非数字字符）

## 🔧 技术实现

### 核心特性
- **条件显示/隐藏**: 使用 `hidden` 属性配合 JavaScript 表达式
- **动态属性**: 使用 `tooltip`、`props.addonBefore`、`props.addonAfter` 等属性
- **上下文引用**: `formData` 全局上下文和 `rootValue` 当前项上下文

### 关键语法
- `formData.路径`: 引用全局表单数据
- `rootValue.字段`: 引用当前列表项的数据
- JavaScript 三元运算符: `条件 ? 值1 : 值2`
- 逻辑运算符: `!`、`===`、`!==`

### 可使用的上下文
1. **formData**: 全局表单数据对象
2. **rootValue**: 当前列表项的数据对象（仅在 array items 中可用）
3. **watch**: 可以监听其他字段的变化

这些联动功能完全基于 FormRender 的原生支持，无需额外的 JavaScript 代码处理，提供了高效、可靠的表单联动体验。